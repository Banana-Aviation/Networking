Basic RSVP-TE configuration

1. Enable rsvp-te globally  `mpls traffic-eng tunnels`

2. Enable rsvp-te on each mpls core facing interface    
! 500Mbps max bandwidth can be reserved/allocated to rsvp-te 
    `interface e0/0`
    `mpls traffic-eng tunnels`
    `ip rsvp bandwidth 500000`

3. Enable OSPF TE extensions
   `router ospf 1`
   `mpls traffic-eng area 0`
   `mpls traffic-eng router-id loopback 0`

4. Create Tunnel interface only on head-end router (rsvp-te tunnels are unidirectional)
! bandwidth allocated to the tunnel is 1000 Kbps ( 1Mbps )
interface Tunnle 1
ip unnumbered Loopback 0
tunnel mode mpls traffic-eng
tunnel destination <tail-end loopback ip>
tunnel mpls traffic-eng bandwidth 1000
tunnel mpls traffic-eng path-options 1 dynamic

#-----------------------------------------------
To route traffic down a tunnel different techniques may be used:

1. Static routing : `ip route <remote network> <prefix> Tunnel 1`
2. Autoroute announce:
    `interface Tunnel 1`
    `tunnel mpls traffic-eng autoroute announce`
   Autoroute announce will make all networks that are found behind tail-end router will be added
   to the routing table of head-end router with next hop via `Tunnel 1`.
   This routes are considered OSPF routes but they are not advertised to OSPF neighbors, and remain local to head-end router.
 routing table of PE1 after autoroute announce change:

       10.0.0.0/8 is variably subnetted, 23 subnets, 3 masks
C        10.0.1.0/32 is directly connected, Loopback0
O        10.0.1.1/32 [110/11] via 10.0.100.11, 01:32:17, Ethernet0/2
O        10.0.1.2/32 [110/11] via 10.0.100.5, 01:32:17, Ethernet0/3
O        10.0.1.3/32 [110/11] via 10.0.100.3, 01:32:17, Ethernet0/1
O        10.0.1.4/32 [110/21] via 10.0.100.11, 01:32:17, Ethernet0/2
                     [110/21] via 10.0.100.3, 01:32:17, Ethernet0/1
O        10.0.1.5/32 [110/21] via 10.0.1.5, 00:23:48, Tunnel1      <---------------------------
C        10.0.100.2/31 is directly connected, Ethernet0/1
L        10.0.100.2/32 is directly connected, Ethernet0/1
C        10.0.100.4/31 is directly connected, Ethernet0/3
L        10.0.100.4/32 is directly connected, Ethernet0/3
O        10.0.100.6/31 [110/20] via 10.0.100.3, 01:32:17, Ethernet0/1
O        10.0.100.8/31 [110/20] via 10.0.100.11, 01:32:17, Ethernet0/2
                       [110/20] via 10.0.100.3, 01:32:17, Ethernet0/1
C        10.0.100.10/31 is directly connected, Ethernet0/2
L        10.0.100.10/32 is directly connected, Ethernet0/2
O        10.0.100.12/31 [110/20] via 10.0.100.5, 01:32:17, Ethernet0/3
O        10.0.100.14/31 [110/20] via 10.0.100.11, 01:32:17, Ethernet0/2
O        10.0.100.16/31 [110/30] via 10.0.100.11, 00:23:48, Ethernet0/2
                        [110/30] via 10.0.100.3, 00:23:48, Ethernet0/1
                        [110/30] via 10.0.1.5, 00:23:48, Tunnel1    <---------------------------
O        10.0.100.18/31 [110/20] via 10.0.100.11, 01:32:17, Ethernet0/2
O        10.10.80.0/24 [110/20] via 10.255.0.0, 01:21:50, Ethernet0/0
O        10.10.90.0/24 [110/40] via 10.0.1.5, 00:23:48, Tunnel1     <---------------------------
C        10.255.0.0/31 is directly connected, Ethernet0/0
L        10.255.0.1/32 is directly connected, Ethernet0/0
O        10.255.0.2/31 [110/30] via 10.0.1.5, 00:23:48, Tunnel1     <--------------------------- 
